{"version":3,"sources":["component/Common/FormsControls/FormsControls.tsx","component/Common/FormsControls/FormsControls.module.css","utils/validators/validators.ts","hoc/withRouter.tsx","hoc/withAuthRedirect.tsx","component/Dialogs/Dialogs.module.scss","component/Dialogs/Message/Message.module.scss","component/Dialogs/DialogsItem/DialogsItem.module.scss","component/Dialogs/Avatar/Avatar.module.scss","component/Dialogs/Message/Message.tsx","component/Dialogs/DialogsItem/DialogsItem.tsx","component/Dialogs/Avatar/Avatar.tsx","component/Dialogs/Dialogs.tsx","component/Dialogs/DialogsContainer.tsx"],"names":["FormControl","meta","children","hasError","touched","error","className","s","formControl","Textarea","props","input","restProps","Input","module","exports","required","value","maxLengthCreator","maxLength","length","withRouter","WrapperComponent","location","useLocation","navigate","useNavigate","params","useParams","router","mapStateToProps","state","isAuth","auth","withAuthRedirect","Component","connect","to","Message","message","textMessage","DialogItems","id","name","path","dialog","isActive","activeLink","link","Avatar","avatar","src","alt","AddMessageFormRedux","reduxForm","form","handleSubmit","onSubmit","Field","formTextarea","component","validate","placeholder","buttonDialogs","SuperButton","type","compose","dialogsPage","dispatch","AddMessage","newMessageBody","actions","addMessage","dialogElement","dialogsData","map","m","messageElement","massagesData","avatarElement","avatarData","dialogsContainer","dialogs","avatarContainer","dialogsItems","messages","formContainer","values"],"mappings":"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","file":"static/js/5.7c2e16fc.chunk.js","sourcesContent":["import React from 'react';\r\nimport s from './FormsControls.module.css'\r\nimport {WrappedFieldMetaProps, WrappedFieldProps} from 'redux-form';\r\n\r\ntype FormControlPropsType = {\r\n    meta: WrappedFieldMetaProps\r\n}\r\n\r\nconst FormControl:React.FC<FormControlPropsType> = ({meta, children}) => {\r\n    const hasError = meta.touched && meta.error\r\n\r\n    return (\r\n        <div className={`${s.formControl} ${hasError ? s.error : ''}`}>\r\n            <div>\r\n                {children}\r\n            </div>\r\n            {hasError && <span>{meta.error}</span>}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport const Textarea:React.FC<WrappedFieldProps> = (props) => {\r\n    const {input, meta, ...restProps} = props\r\n    return <FormControl {...props} ><textarea {...props.input} {...restProps} /></FormControl>\r\n}\r\n\r\nexport const Input:React.FC<WrappedFieldProps> = (props) => {\r\n    const {input, meta, ...restProps} = props\r\n    return <FormControl {...props} ><input {...props.input} {...restProps} /></FormControl>\r\n}\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"formControl\":\"FormsControls_formControl__3RLDu\",\"error\":\"FormsControls_error__2bFT9\",\"formSummaryError\":\"FormsControls_formSummaryError__3yqtq\"};","\r\nexport const required = (value: string) => {\r\n    if (value) return undefined\r\n    return 'Field is required'\r\n}\r\n\r\nexport const maxLengthCreator = (maxLength: number) => {\r\n    return (value: string) => {\r\n        if (value && value.length > maxLength) return `Max length is ${maxLength} symbol`\r\n        return undefined\r\n    }\r\n}\r\n\r\n","import {useLocation, useNavigate, useParams} from 'react-router-dom';\r\nimport React from 'react';\r\n\r\ntype ComponentWithRouterPropsType = {\r\n    location: any\r\n    navigate: any\r\n    params: { userId: string }\r\n}\r\nexport type WithRouterType = {\r\n    router: ComponentWithRouterPropsType\r\n}\r\n\r\nexport const withRouter = (WrapperComponent: typeof React.Component) => (props: object) => {\r\n    const location = useLocation();\r\n    const navigate = useNavigate();\r\n    const params = useParams();\r\n\r\n    return (\r\n        <WrapperComponent\r\n            {...props} router={{location, navigate, params}}\r\n        />\r\n    )\r\n}\r\n\r\n","import React, {ComponentType} from 'react';\r\nimport {Navigate} from 'react-router-dom';\r\nimport {connect} from 'react-redux';\r\nimport {AppStateType} from 'store/types';\r\n\r\n\r\ntype MapStateToProps = {\r\n    isAuth: boolean\r\n}\r\n\r\nconst mapStateToProps = (state: AppStateType): MapStateToProps => {\r\n    return {\r\n        isAuth: state.auth.isAuth\r\n    }\r\n}\r\n\r\nexport function withAuthRedirect<T>(Component: ComponentType<T>) {\r\n\r\n    const RedirectComponent = (props: MapStateToProps) => {\r\n        let {isAuth, ...restProps} = props\r\n        if (!isAuth) return <Navigate to=\"/login\"/>\r\n\r\n        return <Component {...restProps as T}/>\r\n    }\r\n\r\n    return connect<MapStateToProps, unknown, unknown, AppStateType>(mapStateToProps)(RedirectComponent)\r\n}\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dialogsContainer\":\"Dialogs_dialogsContainer__3Mva1\",\"dialogs\":\"Dialogs_dialogs__1dv0Z\",\"avatarContainer\":\"Dialogs_avatarContainer__j5mTq\",\"dialogsItems\":\"Dialogs_dialogsItems__1zScH\",\"messages\":\"Dialogs_messages__2YxR_\",\"formContainer\":\"Dialogs_formContainer__y_gR8\",\"formTextarea\":\"Dialogs_formTextarea__2bgNm\",\"buttonDialogs\":\"Dialogs_buttonDialogs__qER61\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"textMessage\":\"Message_textMessage__NuJC1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dialog\":\"DialogsItem_dialog__1wNjl\",\"activeLink\":\"DialogsItem_activeLink__3S3gL\",\"link\":\"DialogsItem_link__2YGY5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"avatar\":\"Avatar_avatar__3vzgz\"};","import React from 'react';\r\nimport s from './Message.module.scss'\r\n\r\ntype MessagePropsType = {\r\n    message: string\r\n}\r\n\r\nexport const Message:React.FC<MessagePropsType> = ({message} ) => {\r\n\r\n    return <div>\r\n        <span className={s.textMessage}>{message}</span>\r\n    </div>\r\n}\r\n","import React from 'react';\r\nimport s from './DialogsItem.module.scss'\r\nimport {NavLink} from 'react-router-dom';\r\n\r\ntype DialogItemsType = {\r\n    name: string\r\n    id: number\r\n}\r\n\r\nexport const DialogItems: React.FC<DialogItemsType> = ({id, name}) => {\r\n    const path = `/dialogs/${id}`\r\n    const setActive = ({isActive}: { isActive: boolean }) => isActive ? s.activeLink : s.link\r\n\r\n    return <div className={s.dialog}>\r\n        <NavLink className={setActive} to={path}>{name}</NavLink>\r\n    </div>\r\n}\r\n","import React from 'react';\r\nimport s from './Avatar.module.scss'\r\n\r\ntype MessagePropsType = {\r\n    avatar: string\r\n}\r\n\r\nexport const Avatar: React.FC<MessagePropsType> = ({avatar} ) => {\r\n    return <img className={s.avatar} src={avatar}  alt={'avatar'}/>\r\n}\r\n","import React from 'react';\r\nimport s from './Dialogs.module.scss'\r\nimport {Message} from './Message/Message';\r\nimport {DialogItems} from './DialogsItem/DialogsItem';\r\nimport {DialogsPropsType} from './DialogsContainer';\r\nimport {Field, InjectedFormProps, reduxForm} from 'redux-form';\r\nimport {Textarea} from '../Common/FormsControls/FormsControls';\r\nimport {Avatar} from './Avatar/Avatar';\r\nimport SuperButton from '../Common/SuperButton/SuperButton';\r\nimport {maxLengthCreator, required} from 'utils/validators/validators';\r\n\r\n\r\nexport const Dialogs: React.FC<DialogsPropsType> = ({dialogsPage, AddMessage,}) => {\r\n\r\n    const dialogElement = dialogsPage.dialogsData.map((m) => <DialogItems key={m.id} name={m.name} id={m.id}/>)\r\n    const messageElement = dialogsPage.massagesData.map((m) => <Message key={m.id} message={m.message}/>)\r\n    const avatarElement = dialogsPage.avatarData.map((m) => <Avatar key={m.id} avatar={m.link}/>)\r\n\r\n    const addNewMessage = (values: FormDataType) => {\r\n        AddMessage(values.newMessageBody)\r\n    }\r\n\r\n    return (\r\n        <div className={s.dialogsContainer}>\r\n            <div className={s.dialogs}>\r\n                <div className={s.avatarContainer}>\r\n                    {avatarElement}\r\n                </div>\r\n                <div className={s.dialogsItems}>\r\n                    {dialogElement}\r\n                </div>\r\n            </div>\r\n            <div className={s.messages}>\r\n                <div>\r\n                    {messageElement}\r\n                </div>\r\n                <div className={s.formContainer}>\r\n                    <AddMessageFormRedux onSubmit={addNewMessage}/>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\ntype FormDataType = {\r\n    newMessageBody: string\r\n}\r\n\r\nconst maxLength = maxLengthCreator(50)\r\n\r\nconst AddMessageForm: React.FC<InjectedFormProps<FormDataType>> = (props) => {\r\n    const {handleSubmit} = props\r\n\r\n    return (<form onSubmit={handleSubmit}>\r\n            <div>\r\n                <Field className={s.formTextarea}\r\n                       component={Textarea}\r\n                       validate={[required, maxLength]}\r\n                       name={'newMessageBody'}\r\n                       placeholder={'Enter your message'}\r\n                />\r\n            </div>\r\n            <div className={s.buttonDialogs}>\r\n                <SuperButton type={'submit'}>Send</SuperButton>\r\n            </div>\r\n        </form>\r\n    )\r\n}\r\n\r\nconst AddMessageFormRedux = reduxForm<FormDataType>({form: 'dialogAddMessageForm'})(AddMessageForm)","import {connect} from 'react-redux';\r\nimport {compose, Dispatch} from 'redux';\r\nimport {Dialogs} from './Dialogs';\r\nimport React from 'react';\r\nimport {withRouter} from 'hoc/withRouter';\r\nimport {withAuthRedirect} from 'hoc/withAuthRedirect';\r\nimport {actions, InitialStateDialogsType} from 'store/redusers/dialogsReducer';\r\nimport {AppStateType} from 'store/types';\r\n\r\ntype MapStateToPropsType = {\r\n    dialogsPage: InitialStateDialogsType\r\n    isAuth: boolean\r\n}\r\ntype MapDispatchToPropsType = {\r\n    AddMessage: (newMessageBody: string) => void\r\n}\r\n\r\nexport type DialogsPropsType = MapStateToPropsType & MapDispatchToPropsType\r\n\r\nconst mapStateToProps = (state: AppStateType): MapStateToPropsType => {\r\n    return {\r\n        dialogsPage: state.dialogsPage,\r\n        isAuth: state.auth.isAuth,\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: Dispatch): MapDispatchToPropsType => {\r\n    return {\r\n        AddMessage: (newMessageBody: string) => {\r\n            dispatch(actions.addMessage(newMessageBody))\r\n        }\r\n    }\r\n}\r\n\r\nexport default compose<React.ComponentType>(\r\n    connect<MapStateToPropsType, MapDispatchToPropsType, unknown, AppStateType>(mapStateToProps, mapDispatchToProps),\r\n    withRouter,\r\n    withAuthRedirect\r\n)(Dialogs)\r\n"],"sourceRoot":""}