{"version":3,"sources":["component/Common/FormsControls/FormsControls.tsx","component/Common/FormsControls/FormsControls.module.css","utils/validators/validators.ts","hoc/withAuthRedirect.tsx","component/Common/WithRouter/withRouter.tsx","component/Dialogs/Dialogs.module.scss","component/Dialogs/Message/Message.module.scss","component/Dialogs/DialogsItem/DialogsItem.module.scss","component/Dialogs/Avatar/Avatar.module.scss","component/Dialogs/Message/Message.tsx","component/Dialogs/DialogsItem/DialogsItem.tsx","component/Dialogs/Avatar/Avatar.tsx","component/Dialogs/Dialogs.tsx","component/Dialogs/DialogsContainer.tsx"],"names":["FormControl","meta","children","hasError","touched","error","className","s","formControl","Textarea","props","input","child","restProps","Input","module","exports","required","value","maxLengthCreator","maxLength","length","mapStateToProps","state","isAuth","auth","withAuthRedirect","Component","connect","to","withRouter","WrapperComponent","location","useLocation","navigate","useNavigate","params","useParams","router","Message","message","textMessage","DialogItems","id","name","path","dialog","isActive","activeLink","link","Avatar","avatar","src","alt","AddMessageFormRedux","reduxForm","form","handleSubmit","onSubmit","Field","formTextarea","component","validate","placeholder","buttonDialogs","SuperButton","type","compose","dialogsPage","dispatch","AddMessage","newMessageBody","AddMessageAC","dialogElement","dialogsData","map","m","messageElement","massagesData","avatarElement","avatarData","dialogsContainer","dialogs","avatarContainer","dialogsItems","messages","formContainer","values"],"mappings":"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","file":"static/js/5.1434fe9d.chunk.js","sourcesContent":["import React from 'react';\r\nimport s from './FormsControls.module.css'\r\n\r\nconst FormControl = ({meta, children,}: any) => {\r\n    const hasError = meta.touched && meta.error\r\n\r\n    return (\r\n        <div className={`${s.formControl} ${hasError ? s.error : ''}`}>\r\n            <div>\r\n                {children}\r\n            </div>\r\n            {hasError && <span>{meta.error}</span>}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport const Textarea = (props: any) => {\r\n    const {input, meta, child, ...restProps} = props\r\n    return <FormControl {...props} ><textarea {...props.input} {...restProps} /></FormControl>\r\n}\r\n\r\nexport const Input = (props: any) => {\r\n    const {input, meta, children, ...restProps} = props\r\n    return <FormControl {...props} ><input {...props.input} {...restProps} /></FormControl>\r\n}\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"formControl\":\"FormsControls_formControl__3RLDu\",\"error\":\"FormsControls_error__2bFT9\",\"formSummaryError\":\"FormsControls_formSummaryError__3yqtq\"};","\r\nexport const required = (value: string) => {\r\n    if (value) return undefined\r\n    return 'Field is required'\r\n}\r\n\r\nexport const maxLengthCreator = (maxLength: number) => {\r\n\r\n    return (value: string) => {\r\n        if (value && value.length > maxLength) return `Max length is ${maxLength} symbol`\r\n        return undefined\r\n    }\r\n}\r\n\r\n","import React, {ComponentType} from 'react';\r\nimport {Navigate} from 'react-router-dom';\r\nimport {connect} from 'react-redux';\r\nimport {AppStateType} from '../redux/reduxStore';\r\n\r\ntype MapStateToProps = {\r\n    isAuth: boolean\r\n}\r\nconst mapStateToProps = (state: AppStateType): MapStateToProps => {\r\n    return {\r\n        isAuth: state.auth.isAuth\r\n    }\r\n}\r\n\r\nexport function withAuthRedirect <T>(Component: ComponentType<T>) {\r\n    const RedirectComponent = (props: MapStateToProps) => {\r\n        let {isAuth, ...restProps} = props\r\n        if (!isAuth) return <Navigate to=\"/login\"/>\r\n\r\n        return <Component {...restProps as T}/>\r\n    }\r\n\r\n    return connect(mapStateToProps)(RedirectComponent)\r\n}","import {useLocation, useNavigate, useParams} from 'react-router-dom';\r\nimport React from 'react';\r\n\r\ntype ComponentWithRouterPropsType = {\r\n    location: any\r\n    navigate: any\r\n    params: { userId: string }\r\n}\r\nexport type WithRouterType = {\r\n    router: ComponentWithRouterPropsType\r\n}\r\n\r\nexport const withRouter = (WrapperComponent: typeof React.Component) => (props: object) => {\r\n    const location = useLocation();\r\n    const navigate = useNavigate();\r\n    const params = useParams();\r\n\r\n    return (\r\n        <WrapperComponent\r\n            {...props} router={{location, navigate, params}}\r\n        />\r\n    )\r\n}\r\n\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dialogsContainer\":\"Dialogs_dialogsContainer__3Mva1\",\"dialogs\":\"Dialogs_dialogs__1dv0Z\",\"avatarContainer\":\"Dialogs_avatarContainer__j5mTq\",\"dialogsItems\":\"Dialogs_dialogsItems__1zScH\",\"messages\":\"Dialogs_messages__2YxR_\",\"formContainer\":\"Dialogs_formContainer__y_gR8\",\"formTextarea\":\"Dialogs_formTextarea__2bgNm\",\"buttonDialogs\":\"Dialogs_buttonDialogs__qER61\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"textMessage\":\"Message_textMessage__NuJC1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dialog\":\"DialogsItem_dialog__1wNjl\",\"activeLink\":\"DialogsItem_activeLink__3S3gL\",\"link\":\"DialogsItem_link__2YGY5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"avatar\":\"Avatar_avatar__3vzgz\"};","import React from 'react';\r\nimport s from './Message.module.scss'\r\n\r\ntype MessagePropsType = {\r\n    message: string\r\n}\r\n\r\nexport const Message = ({message,}: MessagePropsType) => {\r\n\r\n    return <div>\r\n        <span className={s.textMessage}>{message}</span>\r\n    </div>\r\n}\r\n","import React from 'react';\r\nimport s from './DialogsItem.module.scss'\r\nimport {NavLink} from 'react-router-dom';\r\n\r\ntype DialogItemsType = {\r\n    name: string\r\n    id: number\r\n}\r\n\r\nexport const DialogItems = ({id, name,}: DialogItemsType) => {\r\n    const path = `/dialogs/${id}`\r\n    const setActive = ({isActive}: { isActive: boolean }) => isActive ? s.activeLink : s.link\r\n\r\n    return <div className={s.dialog}>\r\n        <NavLink className={setActive} to={path}>{name}</NavLink>\r\n    </div>\r\n}\r\n","import React from 'react';\r\nimport s from './Avatar.module.scss'\r\n\r\ntype MessagePropsType = {\r\n    avatar: string\r\n}\r\n\r\nexport const Avatar = ({avatar,}: MessagePropsType) => {\r\n    return <img className={s.avatar} src={avatar}  alt={'avatar'}/>\r\n}\r\n","import React from 'react';\r\nimport s from './Dialogs.module.scss'\r\nimport {Message} from './Message/Message';\r\nimport {DialogItems} from './DialogsItem/DialogsItem';\r\nimport {DialogsPropsType} from './DialogsContainer';\r\nimport {Field, InjectedFormProps, reduxForm} from 'redux-form';\r\nimport {Textarea} from '../Common/FormsControls/FormsControls';\r\nimport {maxLengthCreator, required} from '../../utils/validators/validators';\r\nimport {Avatar} from './Avatar/Avatar';\r\nimport SuperButton from '../Common/SuperButton/SuperButton';\r\n\r\n\r\nexport const Dialogs = ({dialogsPage, AddMessage,}: DialogsPropsType) => {\r\n\r\n    const dialogElement = dialogsPage.dialogsData.map((m) => <DialogItems key={m.id} name={m.name} id={m.id}/>)\r\n    const messageElement = dialogsPage.massagesData.map((m) => <Message key={m.id} message={m.message}/>)\r\n    const avatarElement = dialogsPage.avatarData.map((m) => <Avatar key={m.id} avatar={m.link}/>)\r\n\r\n    const addNewMessage = (values: FormDataType) => {\r\n        AddMessage(values.newMessageBody)\r\n    }\r\n\r\n    return (\r\n        <div className={s.dialogsContainer}>\r\n            <div className={s.dialogs}>\r\n                <div className={s.avatarContainer}>\r\n                    {avatarElement}\r\n                </div>\r\n                <div className={s.dialogsItems}>\r\n                    {dialogElement}\r\n                </div>\r\n            </div>\r\n            <div className={s.messages}>\r\n                <div>\r\n                    {messageElement}\r\n                </div>\r\n                <div className={s.formContainer}>\r\n                    <AddMessageFormRedux onSubmit={addNewMessage}/>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\ntype FormDataType = {\r\n    newMessageBody: string\r\n}\r\n\r\nconst maxLength = maxLengthCreator(50)\r\n\r\nconst AddMessageForm: React.FC<InjectedFormProps<FormDataType>> = (props) => {\r\n    const {handleSubmit} = props\r\n\r\n    return (<form onSubmit={handleSubmit}>\r\n            <div>\r\n                <Field className={s.formTextarea}\r\n                       component={Textarea}\r\n                       validate={[required, maxLength]}\r\n                       name={'newMessageBody'}\r\n                       placeholder={'Enter your message'}\r\n                />\r\n            </div>\r\n            <div className={s.buttonDialogs}>\r\n                <SuperButton type={'submit'}>Send</SuperButton>\r\n            </div>\r\n        </form>\r\n    )\r\n}\r\n\r\nconst AddMessageFormRedux = reduxForm<FormDataType>({form: 'dialogAddMessageForm'})(AddMessageForm)","import {connect} from 'react-redux';\r\nimport {AddMessageAC, InitialStateDialogsType} from '../../redux/dialogsReducer';\r\nimport {AppStateType} from '../../redux/reduxStore';\r\nimport {compose, Dispatch} from 'redux';\r\nimport {Dialogs} from './Dialogs';\r\nimport {withAuthRedirect} from '../../hoc/withAuthRedirect';\r\nimport React from 'react';\r\nimport {withRouter} from '../Common/WithRouter/withRouter';\r\n\r\nexport type DialogsPropsType = MapStateToPropsType & mapDispatchToPropsType\r\n\r\ntype MapStateToPropsType = {\r\n    dialogsPage: InitialStateDialogsType\r\n    isAuth: boolean\r\n}\r\ntype mapDispatchToPropsType = {\r\n    AddMessage: (newMessageBody: string) => void\r\n}\r\n\r\nconst mapStateToProps = (state: AppStateType): MapStateToPropsType => {\r\n    return {\r\n        dialogsPage: state.dialogsPage,\r\n        isAuth: state.auth.isAuth,\r\n    }\r\n}\r\n\r\nlet mapDispatchToProps = (dispatch: Dispatch): mapDispatchToPropsType => {\r\n    return {\r\n        AddMessage: (newMessageBody: string) => {\r\n            dispatch(AddMessageAC(newMessageBody))\r\n        }\r\n    }\r\n}\r\n\r\nexport default compose<React.ComponentType>(\r\n    connect(mapStateToProps, mapDispatchToProps),\r\n    withRouter,\r\n    withAuthRedirect\r\n)(Dialogs)\r\n"],"sourceRoot":""}